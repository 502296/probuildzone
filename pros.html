<!doctype html>

<html lang="en" dir="ltr">

<head>

  <meta charset="utf-8"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>ProBuildZone â€” Start Free Trial</title>

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>

    :root{

      --pbz:#0F2A43;

      --gold:#D4AF37;

      --muted:#617186;

      --bg:#f3f5f7;

    }

    *{box-sizing:border-box}

    body{

      margin:0;

      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;

      background:var(--bg);

      color:var(--pbz);

    }

    .page{

      max-width:820px;

      margin:28px auto 40px;

      padding:0 14px;

    }

    h1{margin-bottom:16px;font-size:26px}

    .card{

      background:#fff;

      border:1px solid #e3e7eb;

      border-radius:16px;

      padding:18px 16px 20px;

      box-shadow:0 6px 22px rgba(0,0,0,.03);

    }

    label{display:block;font-weight:600;margin-bottom:6px}

    input,select,textarea{

      width:100%;

      padding:12px;

      border:1px solid #d5d9de;

      border-radius:10px;

      font:inherit;

      background:#fff;

    }

    textarea{min-height:110px;resize:vertical}

    .grid{

      display:grid;

      grid-template-columns:repeat(auto-fit,minmax(230px,1fr));

      gap:14px;

    }

    /* checkbox section */

    .agree{

      margin-top:14px;

      display:flex;

      flex-direction:column;            /* Ø§Ù„ÙƒÙ„Ø§Ù… ØªØ­Øª Ø§Ù„Ù…Ø±Ø¨Ø¹ */

      gap:6px;

      align-items:flex-start;

    }

    .agree input{

      width:20px;

      height:20px;

    }

    .agree label{

      margin:0;

      font-weight:400;

      line-height:1.4;

    }

    .agree a{color:#0b70ff;text-decoration:underline}

    .actions{

      margin-top:18px;

      display:flex;

      gap:10px;

      flex-wrap:wrap;

    }

    button{border:none;cursor:pointer;font-weight:600}

    .btn-main{

      background:var(--gold);

      color:#000;

      padding:12px 16px;

      border-radius:10px;

    }

    .btn-secondary{

      background:#edf0f3;

      color:var(--pbz);

      padding:12px 16px;

      border-radius:10px;

    }

    .alert{

      margin-top:12px;

      background:#fdeeee;

      border:1px solid #f4c3c3;

      border-radius:10px;

      padding:10px 12px;

      color:#a52f2f;

      display:none;

      white-space:pre-wrap;

    }

    @media (max-width:540px){

      .card{padding:16px 14px 20px}

      .actions{flex-direction:column}

      .btn-main,.btn-secondary{width:100%;text-align:center}

    }

  </style>

</head>

<body>

  <div class="page">

    <h1>ProBuildZone â€” Start Free Trial</h1>

    <div class="card">

      <form id="prosForm" novalidate>

        <div class="grid">

          <div>

            <label for="name">Business / Owner name</label>

            <input id="name" name="name" placeholder="John &amp; Sons Builders" required>

          </div>

          <div>

            <label for="email">Email</label>

            <input id="email" name="email" type="email" placeholder="you@example.com" required>

          </div>

          <div>

            <label for="phone">Phone</label>

            <input id="phone" name="phone" placeholder="5022968111" required>

          </div>

          <div>

            <label for="address">Business address</label>

            <input id="address" name="address" placeholder="266 Eldorado Ave">

          </div>

          <div>

            <label for="license">Business license / #</label>

            <input id="license" name="license" placeholder="KY-123456" required>

          </div>

          <div>

            <label for="insurance">Insurance (optional)</label>

            <select id="insurance" name="insurance">

              <option value="">â€” Select â€”</option>

              <option>General Liability</option>

              <option>Workersâ€™ Compensation</option>

              <option>Bonded</option>

            </select>

          </div>

          <div style="grid-column:1/-1">

            <label for="notes">Services &amp; notes (optional)</label>

            <textarea id="notes" name="notes" placeholder="Short description of services..."></textarea>

          </div>

        </div>



        <div class="agree">

          <input id="agree" type="checkbox" checked required>

          <label for="agree">

            By starting your free trial, you agree to our

            <a href="/terms.html" target="_blank">Terms</a> &

            <a href="/privacy.html" target="_blank">Privacy</a>.

          </label>

        </div>



        <div id="alert" class="alert"></div>



        <div class="actions">

          <button type="reset" class="btn-secondary">Reset</button>

          <button id="startBtn" type="button" class="btn-main">Start Free Trial</button>

        </div>

      </form>

    </div>

  </div>



  <script>

    const form = document.getElementById('prosForm');

    const alertBox = document.getElementById('alert');

    const btn = document.getElementById('startBtn');



    // ðŸ‘‡ Ù†ÙØ³ Ø´ØºÙ„Ùƒ Ø§Ù„Ù‚Ø¯ÙŠÙ…: Ù„Ùˆ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ netlify.app Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø§Ø± Ù†Ø³Ø¨ÙŠ

    // Ù„Ùˆ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† ØªØ¨Ø¹Ùƒ (.com) Ù†ÙˆØ¬Ù‘Ù‡ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù…ÙˆÙ‚Ø¹ netlify.app Ø§Ù„Ù„ÙŠ Ø¹Ù„ÙŠÙ‡ Ø§Ù„ÙÙ†ÙƒØ´Ù†Ø§Øª

    const BASE = location.hostname.endsWith('netlify.app')

      ? ''

      : 'https://probuildzone.netlify.app';



    function showError(msg){

      alertBox.textContent = msg;

      alertBox.style.display = 'block';

    }

    function clearError(){

      alertBox.textContent = '';

      alertBox.style.display = 'none';

    }



    async function startTrial(){

      clearError();



      const payload = {

        name: document.getElementById('name').value.trim(),

        email: document.getElementById('email').value.trim(),

        phone: document.getElementById('phone').value.trim(),

        address: document.getElementById('address').value.trim(),

        license: document.getElementById('license').value.trim(),

        insurance: document.getElementById('insurance').value,

        notes: document.getElementById('notes').value.trim(),

      };



      if (!payload.name || !payload.email || !payload.phone || !payload.license){

        showError('Please fill name, email, phone, and license.');

        return;

      }



      // Ù†Ø®Ø²Ù†Ù‡Ø§ Ø¹Ø´Ø§Ù† success.html ÙŠØ±Ø³Ù„Ù‡Ø§ Ù„Ù€ Netlify/Supabase

      localStorage.setItem('pbz_form_data', JSON.stringify(payload));



      btn.disabled = true;

      btn.textContent = 'Creating checkout...';



      try {

        const res = await fetch(`${BASE}/.netlify/functions/create-checkout-session`, {

          method: 'POST',

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify(payload),

        });



        if (!res.ok){

          const t = await res.text();

          showError('Stripe error: ' + t);

        } else {

          const data = await res.json();

          if (data && data.url){

            window.location.href = data.url;

          } else {

            showError('No checkout URL returned.');

          }

        }

      } catch (err){

        showError('Network error: ' + err.message);

      } finally {

        btn.disabled = false;

        btn.textContent = 'Start Free Trial';

      }

    }



    btn.addEventListener('click', startTrial);

    form.addEventListener('submit', e => e.preventDefault());

  </script>

</body>

</html>
