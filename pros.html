<!doctype html>

<html lang="en">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ProBuildZone — For Pros</title>

  <style>

    :root{--pbz-blue:#0F2A43;--pbz-orange:#F28C1B;--muted:#5A6B7A;}

    *{box-sizing:border-box}

    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#0f2337;color:#e9f0f7}

    header{padding:18px 20px;text-align:center;font-weight:800}

    .wrap{max-width:980px;margin:0 auto;padding:24px 16px}

    .card{background:#102a44;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:22px;box-shadow:0 8px 30px rgba(0,0,0,.25)}

    h1{margin:0 0 8px;font-size:28px}

    p{margin:0 0 16px;color:#b7c6d6}

    form{display:grid;grid-template-columns:1fr 1fr;gap:12px}

    label{font-size:13px;font-weight:600;color:#dbe6f2}

    input,textarea{width:100%;padding:12px;border:1px solid #284563;border-radius:10px;background:#0e2031;color:#e9f0f7}

    input:focus,textarea:focus{outline:none;border-color:#3c6a95;box-shadow:0 0 0 3px rgba(60,106,149,.25)}

    textarea{min-height:110px;grid-column:span 2}

    .row-2{grid-column:span 2}

    .hint{color:#9cb0c4;font-size:13px}

    .actions{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-top:8px}

    .btn{border:0;border-radius:12px;padding:14px 18px;font-weight:800;cursor:pointer}

    .btn-outline{background:transparent;color:#dbe6f2;border:1px solid #2e4a67}

    .btn-primary{background:#F28C1B;color:#0F2A43}

    @media (max-width:740px){form{grid-template-columns:1fr} textarea{grid-column:span 1} .actions{flex-direction:column;align-items:stretch}}

  </style>

</head>

<body>

  <header>ProBuildZone</header>

  <div class="wrap">

    <div class="card" style="margin-bottom:20px">

      <h1>Join ProBuildZone — Get Local Jobs</h1>

      <p>30-day free trial, then annual plan. Cancel anytime during trial.</p>

    </div>



    <div class="card">

      <form id="proForm" autocomplete="on">

        <div>

          <label for="company">Company Name</label>

          <input id="company" name="company" placeholder="e.g., Bluegrass Builders LLC" required />

        </div>

        <div>

          <label for="fullName">Your Name</label>

          <input id="fullName" name="fullName" placeholder="Full name" required />

        </div>

        <div>

          <label for="email">Email</label>

          <input id="email" name="email" type="email" placeholder="you@company.com" required />

        </div>

        <div>

          <label for="phone">Phone</label>

          <input id="phone" name="phone" type="tel" placeholder="(502) 555-0123" />

        </div>

        <div class="row-2">

          <label for="address">Business Address</label>

          <input id="address" name="address" placeholder="Street, City, State" />

        </div>

        <div>

          <label for="businessLicense">Business License / #</label>

          <input id="businessLicense" name="businessLicense" placeholder="License number (if applicable)" />

        </div>

        <div style="display:flex;align-items:center;gap:8px;padding-top:8px">

          <input id="insurance" name="insurance" type="checkbox" />

          <label for="insurance" style="margin:0">I have active liability insurance</label>

        </div>

        <div class="row-2">

          <label for="notes">Notes (Optional)</label>

          <textarea id="notes" name="notes" placeholder="Tell homeowners what you specialize in..."></textarea>

        </div>

        <div class="actions row-2">

          <div class="hint">By starting your free trial, you agree to our Terms and Privacy Policy.</div>

          <div>

            <button class="btn btn-outline" type="reset">Reset</button>

            <button class="btn btn-primary" id="startTrial" type="button">Start Free Trial</button>

          </div>

        </div>

      </form>

    </div>

  </div>



  <script>

    async function postJSON(url, data){

      const r = await fetch(url,{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(data||{}) });

      if(!r.ok){ const t = await r.text(); throw new Error(`Request failed (${r.status}): ${t}`); }

      return r.json();

    }

    const btn = document.getElementById('startTrial');

    const form = document.getElementById('proForm');

    btn?.addEventListener('click', async (e)=>{

      e.preventDefault(); btn.disabled = true; btn.textContent = 'Please wait…';

      try{

        const company = form.company?.value?.trim()||'';

        const fullName = form.fullName?.value?.trim()||'';

        const email = form.email?.value?.trim()||'';

        const phone = form.phone?.value?.trim()||'';

        const address = form.address?.value?.trim()||'';

        const businessLicense = form.businessLicense?.value?.trim()||'';

        const insurance = form.insurance?.checked ? 'yes':'no';

        const notes = form.notes?.value?.trim()||'';

        const profile = { company, fullName, email, phone, address, businessLicense, insurance, notes };

        await postJSON('/api/pros/create', profile);

        const session = await postJSON('/api/stripe/create-checkout-session', { email, metadata:{ source:'probuildzone', plan:'yearly' } });

        if(session?.url){ window.location.href = session.url; }

        else{ alert('Could not start checkout. Please try again.'); btn.disabled=false; btn.textContent='Start Free Trial'; }

      }catch(err){ console.error(err); alert('Something went wrong. Please try again.'); btn.disabled=false; btn.textContent='Start Free Trial'; }

    });

  </script>

</body>

</html>
