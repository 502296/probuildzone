<!doctype html>

<html lang="en" dir="ltr">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ProBuildZone – Pro Subscription</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">



  <style>

    :root{

      --navy:#0f2743;         /* أساس الهوية */

      --navy-2:#162235;

      --navy-3:#0f1a2a;

      --orange:#f59e0b;       /* Accent */

      --text:#e9eef7;

      --muted:#a7b3c7;

      --danger:#ff6b6b;

      --ok:#66d18f;

      --field:#0f1a2a;

      --field-b:#22324e;

      --ring:#35507a66;

      --shadow: 0 10px 30px rgba(0,0,0,.35), 0 2px 10px rgba(0,0,0,.25);

      --radius:14px;

    }

    *{box-sizing:border-box}

    html,body{height:100%}

    body{

      margin:0;

      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;

      color:var(--text);

      background:

        radial-gradient(1200px 600px at 80% -200px, #1a2c49 0, #0e1623 60%),

        linear-gradient(160deg, #0b1421, #0e1623);

      display:flex; align-items:flex-start; justify-content:center;

    }

    .wrap{width:100%;max-width:980px;padding:32px 18px 64px}



    /* ===== Brand (Inline SVG Logo + Wordmark) ===== */

    .brand{display:flex;flex-direction:column;align-items:center;gap:10px;margin-bottom:22px;text-align:center}

    .logo-row{display:flex;align-items:center;gap:12px}

    .logo-icon{

      width:56px;height:56px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;

      background:linear-gradient(180deg,#0f2136,#0b1627); border:1px solid #22324e99; box-shadow:var(--shadow)

    }

    .logo-word{

      font-weight:800; font-size:28px; letter-spacing:.2px; color:#ffffff;

      text-shadow:0 1px 0 rgba(0,0,0,.25);

    }

    .tagline{

      color:var(--orange); font-weight:700; letter-spacing:.2px;

    }

    .subline{ color:var(--muted); font-weight:600; font-size:.95rem }



    /* ===== Card ===== */

    .card{

      background:linear-gradient(180deg, var(--navy-2) 0%, var(--navy-3) 100%);

      border:1px solid #22324e99; border-radius:var(--radius); box-shadow:var(--shadow); padding:22px;

    }

    .card .head{

      display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px;

      border-bottom:1px solid #1f2d45;padding-bottom:14px;

    }

    .head h2{margin:0;font-size:1.25rem}

    .price-badge{background:#101929;border:1px solid #263a5c;border-radius:10px;padding:8px 12px;color:#cfe0ff;font-weight:800}



    /* ===== Form ===== */

    form{display:grid;gap:14px}

    .grid{display:grid;gap:12px}

    @media (min-width:720px){

      .grid-2{grid-template-columns:1fr 1fr}

      .grid-3{grid-template-columns:1fr 1fr 1fr}

    }

    label{display:block;font-size:.9rem;color:#b9c6dc;margin-bottom:6px}

    input,select,textarea{

      width:100%;padding:12px 14px;border-radius:10px;background:var(--field);color:var(--text);

      border:1px solid var(--field-b);outline:none;transition:border-color .15s,box-shadow .15s,background .15s;

    }

    input:focus,select:focus,textarea:focus{border-color:#4b6fad;box-shadow:0 0 0 3px var(--ring);background:#0f1f35}

    textarea{min-height:84px;resize:vertical}

    .inline{display:flex;gap:10px;align-items:center;flex-wrap:wrap}

    .inline input[type="checkbox"]{width:auto;accent-color:var(--orange)}

    .note{font-size:.92rem;color:var(--muted)}

    .note.err{color:var(--danger)} .note.ok{color:var(--ok)}



    .actions{display:flex;gap:12px;justify-content:flex-end;align-items:center;margin-top:6px}

    .btn{

      appearance:none;border:0;border-radius:12px;padding:12px 18px;font-weight:800;cursor:pointer;

      transition:transform .06s, box-shadow .12s, opacity .2s;

      box-shadow:0 6px 18px rgba(249,162,58,.25), 0 2px 6px rgba(0,0,0,.35);

    }

    .btn:active{transform:translateY(1px)}

    .btn.primary{background:linear-gradient(180deg,#ffb14d,#f9972e);color:#301a00}

    .btn.ghost{background:transparent;border:1px solid #3b4f72;color:#cfe0ff}



    .foot{margin-top:22px;border-top:1px dashed #2b3d5f;padding-top:12px;color:#9fb0ca;font-size:.9rem}

    .req{color:#f7b267;font-weight:800}

  </style>

</head>

<body>

  <div class="wrap">



    <!-- ===== Inline SVG logo + Wordmark (no external image) ===== -->

    <div class="brand" role="banner" aria-label="ProBuildZone header">

      <div class="logo-row">

        <!-- Icon -->

        <span class="logo-icon" aria-hidden="true">

          <svg width="34" height="34" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">

            <!-- House outline -->

            <path d="M6 23 L24 9 L42 23" stroke="var(--navy)" stroke-width="3.2" stroke-linecap="round" stroke-linejoin="round"/>

            <path d="M10 21 V38 H38 V21" stroke="var(--navy)" stroke-width="3.2" stroke-linecap="round" stroke-linejoin="round"/>

            <!-- small window -->

            <rect x="22" y="27" width="4" height="4" rx="0.8" fill="var(--orange)"/>

          </svg>

        </span>

        <!-- Wordmark -->

        <div class="logo-word">ProBuildZone</div>

      </div>

      <div class="tagline">Fair Prices • Local Pros</div>

      <div class="subline">30-day free trial — then $25/month.</div>

    </div>



    <!-- ===== Subscription Card ===== -->

    <div class="card">

      <div class="head">

        <h2>Pro Subscription</h2>

        <div class="price-badge">$25/month</div>

      </div>



      <form id="pro-form" novalidate>

        <div class="grid grid-2">

          <div>

            <label for="name">Full Name *</label>

            <input id="name" name="name" placeholder="Your full name" required>

          </div>

          <div>

            <label for="company">Business / Company (optional)</label>

            <input id="company" name="company" placeholder="ABC LLC">

          </div>

        </div>



        <div class="grid grid-2">

          <div>

            <label for="email">Email *</label>

            <input id="email" name="email" type="email" placeholder="you@example.com" required>

          </div>

          <div>

            <label for="phone">Phone (optional)</label>

            <input id="phone" name="phone" type="tel" placeholder="+1 (___) ___-____">

          </div>

        </div>



        <div class="grid grid-3">

          <div>

            <label for="address">Street Address</label>

            <input id="address" name="address" placeholder="123 Main St">

          </div>

          <div>

            <label for="city">City</label>

            <input id="city" name="city" placeholder="City">

          </div>

          <div>

            <label for="state">State</label>

            <input id="state" name="state" placeholder="KY">

          </div>

        </div>



        <div class="grid grid-2">

          <div>

            <label for="zip">ZIP</label>

            <input id="zip" name="zip" placeholder="402xx">

          </div>

          <div>

            <label for="license">Business License / Registration # (optional)</label>

            <input id="license" name="license" placeholder="License / Registration #">

          </div>

        </div>



        <div class="grid">

          <div class="inline">

            <input id="has-ins" type="checkbox">

            <label for="has-ins">We carry general liability insurance (optional)</label>

          </div>

        </div>



        <div class="grid grid-2" id="ins-optional" style="display:none">

          <div>

            <label for="ins-carrier">Insurance Carrier (optional)</label>

            <input id="ins-carrier" placeholder="Carrier">

          </div>

          <div>

            <label for="ins-policy">Policy # (optional)</label>

            <input id="ins-policy" placeholder="Policy #">

          </div>

        </div>



        <div class="note">

          By clicking “Continue to Secure Payment”, you’ll be redirected to Stripe Checkout to complete your $25/month subscription.

        </div>



        <div class="actions">

          <button type="button" class="btn ghost" id="cancel-btn">Cancel</button>

          <button type="button" class="btn primary" id="pay-btn">Continue to Secure Payment</button>

        </div>



        <div id="status" class="foot note"></div>

        <div class="foot note"><span class="req">(*)</span> Required fields: Full Name & Email.</div>

      </form>

    </div>

  </div>



  <script>

    // Toggle optional insurance fields

    const hasIns = document.getElementById('has-ins');

    const insBlock = document.getElementById('ins-optional');

    hasIns.addEventListener('change', () => {

      insBlock.style.display = hasIns.checked ? 'grid' : 'none';

    });



    const statusEl = document.getElementById('status');

    const setStatus = (msg, kind='note') => { statusEl.textContent = msg; statusEl.className = 'foot note ' + (kind||''); };

    const setLoading = (is) => { document.getElementById('pay-btn').disabled = !!is; };



    document.getElementById('cancel-btn').addEventListener('click', () => { window.location.href = '/'; });



    document.getElementById('pay-btn').addEventListener('click', async () => {

      setStatus(''); setLoading(true);



      const name  = document.getElementById('name').value.trim();

      const email = document.getElementById('email').value.trim();

      if (!name || !email){ setStatus('Please fill the required fields (Full Name & Email).', 'err'); setLoading(false); return; }



      const payload = {

        name, email,

        company:   document.getElementById('company').value.trim() || undefined,

        phone:     document.getElementById('phone').value.trim()   || undefined,

        address:   document.getElementById('address').value.trim() || undefined,

        city:      document.getElementById('city').value.trim()    || undefined,

        state:     document.getElementById('state').value.trim()   || undefined,

        zip:       document.getElementById('zip').value.trim()     || undefined,

        license:   document.getElementById('license').value.trim() || undefined,

        hasInsurance: hasIns.checked || undefined,

        insuranceCarrier: document.getElementById('ins-carrier').value.trim() || undefined,

        insurancePolicy:  document.getElementById('ins-policy').value.trim()  || undefined,

      };



      try {

        const API_BASE = window.location.origin;

        const res = await fetch(`${API_BASE}/api/stripe/create-checkout-session`, {

          method: 'POST', headers: {'Content-Type':'application/json'},

          body: JSON.stringify(payload),

        });



        let data=null; try { data = await res.json(); } catch {}



        if (!res.ok){

          const msg = (data && (data.error || data.details)) ? `${data.error}${data.details? ' — '+data.details:''}` : `HTTP ${res.status}`;

          setStatus(msg, 'err'); setLoading(false); return;

        }



        if (data?.url){ setStatus('Redirecting to Stripe…','ok'); window.location.href = data.url; }

        else { setStatus('No checkout URL returned.', 'err'); setLoading(false); }

      } catch (e) {

        console.error(e); setStatus('Network error. Please try again.', 'err'); setLoading(false);

      }

    });

  </script>

</body>

</html>
