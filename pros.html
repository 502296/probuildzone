<!doctype html>

<html lang="en" dir="ltr">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>ProBuildZone — For Pros</title>

  <meta name="description" content="ProBuildZone Pro Onboarding">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>

    :root{

      --pbz-blue:#0F2A43;

      --pbz-orange:#F28C1B;

      --ink:#1b2b3a;

      --muted:#667889;

      --bg:#eef2f6;           /* رمادي فاتح */

      --card:#ffffff;

      --line:#dde5ee;

      --focus:rgba(15,42,67,.14);

    }

    *{box-sizing:border-box}

    html,body{height:100%}

    body{

      margin:0;

      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      background:var(--bg);

      color:var(--ink);

    }

    a{color:inherit;text-decoration:none}



    /* Header */

    header{

      position:sticky;top:0;z-index:30;

      background:var(--card);

      border-bottom:1px solid var(--line);

    }

    .nav{max-width:1080px;margin:0 auto;display:flex;align-items:center;gap:14px;padding:14px 18px}

    .brand{display:flex;align-items:center;gap:12px;font-weight:800}

    .brand img{height:40px;width:auto;display:block;border-radius:8px}

    .brand .name{font-size:20px;color:var(--pbz-blue)}

    .brand .tag{font-size:12px;color:var(--muted);font-weight:600}



    /* Layout */

    main{padding:26px 16px}

    .wrap{max-width:1080px;margin:0 auto;display:grid;grid-template-columns:1fr;gap:20px}

    .hero{display:grid;gap:6px}

    .hero-card{

      background:linear-gradient(180deg,#f9fbfd,#f1f6fa);

      border:1px solid var(--line);

      border-radius:16px;

      padding:22px 20px;

      box-shadow:0 6px 24px rgba(15,42,67,.06);

    }

    .hero-card h1{margin:0 0 6px;font-size:26px;line-height:1.2;color:var(--pbz-blue)}

    .hero-card p{margin:0;color:#2c3b4a}



    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 10px 30px rgba(15,42,67,.06)}

    .form{padding:20px}

    form{display:grid;grid-template-columns:1fr 1fr;gap:14px}

    label{font-size:13px;font-weight:700;color:var(--pbz-blue)}

    input,textarea{

      width:100%;padding:12px;border:1px solid #cfd8e3;border-radius:12px;background:#fff;color:#102538;font-size:14px;outline:none

    }

    input:focus,textarea:focus{border-color:#9fb3c9;box-shadow:0 0 0 3px var(--focus)}

    textarea{min-height:110px;resize:vertical;grid-column:span 2}

    .row-2{grid-column:span 2}



    /* Checkbox row — صف مستقل ومريح على الهاتف */

    .insurance-row{

      grid-column:span 2;

      display:flex;align-items:center;gap:10px;

      padding-top:2px;

    }

    .insurance-row input{width:auto;accent-color:var(--pbz-orange)}



    .actions{

      grid-column:span 2;

      display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:12px;margin-top:6px

    }

    .hint{color:var(--muted);font-size:13px}



    .btn{

      display:inline-flex;align-items:center;justify-content:center;gap:10px;

      padding:14px 18px;border-radius:14px;border:1px solid #d7dee7;cursor:pointer;font-weight:800;letter-spacing:.2px;background:#fff

    }

    .btn-primary{background:var(--pbz-orange);color:#0F2A43;border:0;box-shadow:0 8px 22px rgba(242,140,27,.32)}

    .btn-primary:hover{transform:translateY(-1px)}

    .btn-primary:active{transform:translateY(1px)}



    .footer{max-width:1080px;margin:26px auto 6px;color:var(--muted);font-size:12.5px;text-align:center}



    /* Toast */

    .toast{

      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);

      background:#0F2A43;color:#fff;padding:12px 14px;border-radius:10px;box-shadow:0 10px 24px rgba(0,0,0,.18);

      opacity:0;pointer-events:none;transition:.3s ease;z-index:40

    }

    .toast.show{opacity:1;pointer-events:auto}



    @media (max-width:860px){

      form{grid-template-columns:1fr}

      textarea{grid-column:span 1}

      .insurance-row{align-items:center}

      .brand img{height:36px}

      .brand .name{font-size:18px}

      .actions{flex-direction:column;align-items:stretch}

    }

  </style>

</head>

<body>

  <header>

    <div class="nav">

      <a class="brand" href="/">

        <!-- بدّل LOGO_URL بمسار شعارك لو موجود -->

        <img src="LOGO_URL" alt="ProBuildZone Logo" onerror="this.style.display='none'">

        <div>

          <div class="name">ProBuildZone</div>

          <div class="tag">Fair Prices · Local Pros</div>

        </div>

      </a>

    </div>

  </header>



  <main>

    <div class="wrap">

      <!-- Hero -->

      <section class="hero">

        <div class="hero-card">

          <h1>Join ProBuildZone — Get Local Jobs</h1>

          <p>Start your <b>30-day free trial</b>. Annual plan after trial — cancel anytime during the trial.</p>

        </div>

      </section>



      <!-- Form -->

      <section class="card form">

        <form id="proForm" autocomplete="on" novalidate>

          <div>

            <label for="company">Company Name</label>

            <input id="company" name="company" placeholder="e.g., Bluegrass Builders LLC" required>

          </div>

          <div>

            <label for="fullName">Your Name</label>

            <input id="fullName" name="fullName" placeholder="Full name" required>

          </div>



          <div>

            <label for="email">Email</label>

            <input id="email" name="email" type="email" inputmode="email" placeholder="you@company.com" required>

          </div>

          <div>

            <label for="phone">Phone</label>

            <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="(502) 555-0123">

          </div>



          <div class="row-2">

            <label for="address">Business Address</label>

            <input id="address" name="address" placeholder="Street, City, State">

          </div>



          <div>

            <label for="businessLicense">Business License / #</label>

            <input id="businessLicense" name="businessLicense" placeholder="License number (if applicable)">

          </div>



          <!-- Checkbox: صف مستقل -->

          <div class="insurance-row">

            <input id="insurance" name="insurance" type="checkbox">

            <label for="insurance">I have active liability insurance</label>

          </div>



          <div class="row-2">

            <label for="notes">Notes (Optional)</label>

            <textarea id="notes" name="notes" placeholder="Tell homeowners what you specialize in..."></textarea>

          </div>



          <div class="actions">

            <div class="hint">By starting your free trial, you agree to our <a href="/privacy.html">Terms</a> & <a href="/privacy.html">Privacy</a>.</div>

            <div>

              <button class="btn" type="reset">Reset</button>

              <button class="btn btn-primary" id="startTrial" type="button">Start Free Trial</button>

            </div>

          </div>

        </form>

      </section>

    </div>



    <div class="footer">© <span id="year"></span> ProBuildZone — Fair Prices · Local Pros</div>

  </main>



  <!-- Toast -->

  <div id="toast" class="toast" role="status" aria-live="polite"></div>



  <script>

    // ========= Settings =========

    // لو APIs على نفس الدومين (Vercel) اتركها فارغة ''

    // لو APIs على ساب-دومين (api.probuildzone.com) غيّرها كما يلي:

    // const API_BASE = 'https://api.probuildzone.com';

    const API_BASE = '';



    document.getElementById('year').textContent = new Date().getFullYear();



    async function postJSON(path, data){

      const url = (API_BASE || '') + path;

      const r = await fetch(url,{

        method:'POST',

        headers:{'Content-Type':'application/json'},

        body: JSON.stringify(data||{})

      });

      const text = await r.text();

      if(!r.ok) throw new Error(`Request failed (${r.status}): ${text.slice(0,200)}`);

      try{ return JSON.parse(text); }catch(e){ return {}; }

    }



    const toast = document.getElementById('toast');

    function showToast(msg, ok=true){

      toast.textContent = msg;

      toast.style.background = ok ? '#0F2A43' : '#9b1c1c';

      toast.classList.add('show');

      setTimeout(()=> toast.classList.remove('show'), 2200);

    }



    const form = document.getElementById('proForm');

    const btn  = document.getElementById('startTrial');



    btn?.addEventListener('click', async (e)=>{

      e.preventDefault();

      btn.disabled = true;

      btn.textContent = 'Please wait…';



      try{

        const company = form.company?.value?.trim() || '';

        const fullName = form.fullName?.value?.trim() || '';

        const email = form.email?.value?.trim() || '';

        const phone = form.phone?.value?.trim() || '';

        const address = form.address?.value?.trim() || '';

        const businessLicense = form.businessLicense?.value?.trim() || '';

        const insurance = form.insurance?.checked ? 'yes' : 'no';

        const notes = form.notes?.value?.trim() || '';



        if(!company || !fullName || !email){

          showToast('Please complete Company, Name and Email.', false);

          btn.disabled = false; btn.textContent = 'Start Free Trial';

          return;

        }



        const profile = { company, fullName, email, phone, address, businessLicense, insurance, notes };



        // 1) Save profile (removes any "Could not save profile" errors)

        await postJSON('/api/pros/create', profile);



        // 2) Create Stripe session

        const session = await postJSON('/api/stripe/create-checkout-session', {

          email,

          metadata: { source: 'probuildzone', plan: 'yearly' }

          // لو تريد Price محدد:

          // priceId: 'price_XXXX'

        });



        if(session?.url){

          window.location.href = session.url;

        }else{

          showToast('Could not start checkout. Please try again.', false);

          btn.disabled = false; btn.textContent = 'Start Free Trial';

        }

      }catch(err){

        console.error(err);

        showToast('Something went wrong. Please try again.', false);

        btn.disabled = false; btn.textContent = 'Start Free Trial';

      }

    });

  </script>

</body>

</html>
