<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>ProBuildZone â€” Get Home Projects Done</title>

  <meta name="description" content="Post your project with photos. Local contractors send offers. You choose the best match â€” fair prices, local pros.">

  <link rel="stylesheet" href="style.css"/>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>



<body>

  <!-- ===== Header / Navbar ===== -->

  <header>

    <nav>

      <div class="brand-logo">

        <span class="pro">Pro</span><span class="build">Build</span><span class="zone">Zone</span>

      </div>

      <ul>

        <!-- ØµØ§Ø±ÙˆØ§ Ø±ÙˆØ§Ø¨Ø· Ø¯Ø§Ø®Ù„ÙŠØ© -->

        <li><a href="#services" class="nav-link">Services</a></li>

        <li><a href="#pros" class="pro-btn nav-link">For Pros</a></li>

      </ul>

    </nav>

  </header>



  <!-- ===== Hero Section ===== -->

  <section class="hero" id="home">

    <div class="overlay">

      <h1>Get Home Projects Done â€” Fair Prices, Local Pros.</h1>

      <p>Post your project with photos. Local contractors send offers. You choose the best match.</p>



      <div class="buttons">

        <button class="btn primary" id="postJobTop">Post a Job (Free)</button>

        <a href="#services" class="btn secondary nav-link">View Services</a>

        <!-- ØªÙ… Ø­Ø°Ù Ø²Ø± Check Offer Prices Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ -->

      </div>



      <!-- Ù†ÙØ¨Ù‚ÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ø±ÙˆØ¶ -->

      <div class="job-id">

        <input id="jobIdQuick" type="text" placeholder="Enter Job ID (e.g., PBZ-99999)">

        <button id="goQuick">Go</button>

      </div>

    </div>

  </section>



  <!-- ===== Services (Ø´Ø¨ÙƒØ© ÙØ¦Ø§Øª Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø§Ù…) ===== -->

  <section id="services" class="services-block">

    <div class="services-head">

      <h2>Popular Services</h2>

      <p>Select a category below â€” it will be prefilled in the form.</p>

    </div>

    <div class="category-grid">

      <!-- Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ù†ÙØªØ­ Ø§Ù„ÙÙˆØ±Ù… ÙˆÙ†Ø¶Ø¨Ø· Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© -->

      <button class="cat" data-cat="Roofing">ğŸ  Roofing</button>

      <button class="cat" data-cat="Decks & Porches">ğŸªš Decks & Porches</button>

      <button class="cat" data-cat="Kitchens">ğŸ³ Kitchens</button>

      <button class="cat" data-cat="Bathrooms">ğŸ› Bathrooms</button>

      <button class="cat" data-cat="Flooring">ğŸªµ Flooring</button>

      <button class="cat" data-cat="Painting">ğŸ¨ Painting</button>

      <button class="cat" data-cat="Masonry">ğŸ§± Masonry</button>

      <button class="cat" data-cat="Electrical">âš¡ Electrical</button>

      <button class="cat" data-cat="Plumbing">ğŸš° Plumbing</button>

      <button class="cat" data-cat="Windows & Doors">ğŸªŸ Windows & Doors</button>

      <button class="cat" data-cat="Landscaping">ğŸŒ¿ Landscaping</button>

      <button class="cat" data-cat="Handyman">ğŸ§° Handyman</button>

    </div>

    <div class="center">

      <button class="btn primary" id="postJobMid">Post a Job</button>

    </div>

  </section>



  <!-- ===== Footer Links (Ù†Ø¨Ù‚ÙŠÙ‡Ø§ ÙƒÙ…Ø§ Ù‡ÙŠ) ===== -->

  <section id="links" class="links-row">

    <a href="#services" class="nav-link">Services</a><span>â€¢</span>

    <a href="privacy.html">Privacy</a><span>â€¢</span>

    <a href="terms.html">Terms</a>

  </section>



  <!-- ===== Modal (Form) ===== -->

  <div class="modal" id="modal" style="display:none">

    <div class="sheet">

      <div class="sheet-head">

        <button class="btn xsm ghost back" id="backBtn">â† Back</button>

        <h3 id="sheetTitle">Post a Job</h3>

        <button class="btn xsm ghost" id="closeDoor">Close</button>

      </div>



      <!-- ===== Job Form ===== -->

      <section class="job-form">

        <h2>Owner details & project info</h2>

        <p class="note">Private fields are hidden from pros until you approve them.</p>



        <!-- Upload -->

        <div class="upload-wrap" id="dropZone">

          <input type="file" id="fileInput" multiple accept="image/*,application/pdf"/>

          <button type="button" class="btn outline" id="pickBtn">

            <i class="fa-solid fa-cloud-arrow-up"></i> Choose Photos/Files

          </button>

          <span class="hint">You can select multiple photos or a PDF plan. Drag & drop is supported.</span>

        </div>

        <div class="file-hint">ğŸ’¡ Adding photos helps pros understand your project better (optional)</div>

        <div class="card" id="fileList"></div>



        <!-- NEW: Category (12 Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ÙÙˆØ±Ù…) -->

        <label>Category *</label>

        <div class="form-categories">

          <label><input type="radio" name="category" value="Roofing" required> ğŸ  Roofing</label>

          <label><input type="radio" name="category" value="Decks & Porches"> ğŸªš Decks & Porches</label>

          <label><input type="radio" name="category" value="Kitchens"> ğŸ³ Kitchens</label>

          <label><input type="radio" name="category" value="Bathrooms"> ğŸ› Bathrooms</label>

          <label><input type="radio" name="category" value="Flooring"> ğŸªµ Flooring</label>

          <label><input type="radio" name="category" value="Painting"> ğŸ¨ Painting</label>

          <label><input type="radio" name="category" value="Masonry"> ğŸ§± Masonry</label>

          <label><input type="radio" name="category" value="Electrical"> âš¡ Electrical</label>

          <label><input type="radio" name="category" value="Plumbing"> ğŸš° Plumbing</label>

          <label><input type="radio" name="category" value="Windows & Doors"> ğŸªŸ Windows & Doors</label>

          <label><input type="radio" name="category" value="Landscaping"> ğŸŒ¿ Landscaping</label>

          <label><input type="radio" name="category" value="Handyman"> ğŸ§° Handyman</label>

        </div>



        <label for="title">Project title *</label>

        <input id="title" type="text" placeholder="e.g., Replace leaking roof" required>



        <label for="summary">Short summary</label>

        <input id="summary" type="text" placeholder="One or two lines...">



        <div class="row2">

          <div>

            <label for="city">City</label>

            <input id="city" type="text" placeholder="Enter your city">

          </div>

          <div>

            <label for="state">State</label>

            <input id="state" type="text" placeholder="Enter your state">

          </div>

        </div>



        <label>Estimated budget range</label>

        <div class="row2">

          <div><input id="budgetMin" type="number" placeholder="From ($)"></div>

          <div><input id="budgetMax" type="number" placeholder="To ($)"></div>

        </div>

        <span class="hint">ğŸ’¡ Just an estimate â€” pros will confirm after seeing your project.</span>



        <div class="row2">

          <div>

            <label for="contactName">Contact name *</label>

            <input id="contactName" type="text" placeholder="Your name" required>

          </div>

          <div>

            <label for="phone">Phone *</label>

            <input id="phone" type="tel" placeholder="Your phone number" required>

          </div>

        </div>



        <label for="email">Email *</label>

        <input id="email" type="email" placeholder="Your email address" required>



        <label for="address">Full address *</label>

        <input id="address" type="text" placeholder="Street, City, State" required>



        <label for="longDesc">Full description *</label>

        <textarea id="longDesc" placeholder="Describe the job in detail..." rows="4" required></textarea>

      </section>

    </div>



    <!-- ===== Fixed Action Bar ===== -->

    <div class="action-bar" id="actionBar">

      <div class="bar-inner">

        <button id="sendBtn" class="btn primary">ğŸš€ Post Job</button>

        <span id="sendMsg" class="hint"></span>

      </div>

    </div>

  </div>



  <!-- ===== For Pros (Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø©) ===== -->

  <section id="pros" class="pros-section">

    <div class="pros-inner">

      <div class="pros-copy">

        <h2>Pros: Get more of the right jobs</h2>

        <ul>

          <li>âœ… <b>3 months free</b> â€” unlimited leads.</li>

          <li>ğŸ’³ Ø«Ù… <b>$300/year</b> â€” Ù…Ø´Ø§Ø±ÙŠØ¹ ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©ØŒ Ø¨Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ… Ù„ÙƒÙ„ Ø¹Ø±Ø¶.</li>

          <li>ğŸ”’ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„ ØªØ¨Ù‚Ù‰ Ù…Ø®ÙÙŠØ© Ø­ØªÙ‰ ÙŠØªÙ… shortlist.</li>

        </ul>

      </div>

      <form class="pros-form" id="proForm">

        <h3>Claim your free trial</h3>

        <label>Business name* <input type="text" name="biz" required></label>

        <label>Owner/Contact name* <input type="text" name="name" required></label>

        <div class="row2">

          <label>Email* <input type="email" name="email" required></label>

          <label>Phone* <input type="tel" name="phone" required></label>

        </div>

        <label>Primary service*

          <select name="primary" required>

            <option value="" disabled selected>Select a service</option>

            <option>Roofing</option><option>Decks & Porches</option><option>Bathrooms</option>

            <option>Kitchens</option><option>Flooring</option><option>Masonry</option>

            <option>Handyman</option><option>Electrical</option><option>Plumbing</option>

            <option>Windows & Doors</option><option>Landscaping</option><option>Painting</option>

          </select>

        </label>

        <label>Service areas (ZIPs) <input type="text" name="zips" placeholder="e.g., 40220, 40299"></label>

        <label>Website/Instagram (optional) <input type="text" name="site" placeholder="https://"></label>



        <button class="btn primary" type="submit">Start Free Trial</button>

        <button class="btn dark" id="payYearly">Pay $300/year</button>

        <p class="hint" id="proMsg"></p>



        <!-- Ø¶Ø¹ Ø§ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ù‡Ù†Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ -->

        <!-- TODO: EMAIL_FOR_NOTIFICATIONS = contact@probuildzone.com -->

      </form>

    </div>

  </section>



  <!-- ===== JavaScript ===== -->

  <script>

    // Smooth scroll Ù„Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©

    document.querySelectorAll('.nav-link').forEach(a=>{

      a.addEventListener('click', (e)=>{

        const href = a.getAttribute('href');

        if(href && href.startsWith('#')){

          e.preventDefault();

          document.querySelector(href)?.scrollIntoView({behavior:'smooth'});

        }

      });

    });



    // Open/Close modal

    const modal = document.getElementById('modal');

    const openDoor = () => { modal.style.display = 'flex'; document.documentElement.style.overflow = 'hidden'; };

    const closeDoor = () => { modal.style.display = 'none'; document.documentElement.style.overflow = ''; };



    document.getElementById('postJobTop').onclick  = () => { openDoor(); document.querySelector('.sheet').scrollTop = 0; };

    document.getElementById('postJobMid').onclick  = () => { openDoor(); document.querySelector('.sheet').scrollTop = 0; };

    document.getElementById('closeDoor').onclick   = closeDoor;

    document.getElementById('backBtn').onclick     = closeDoor;



    // Quick offers (Ù†ÙØ¨Ù‚ÙŠ Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« ÙÙ‚Ø·)

    document.getElementById('goQuick').onclick = () => {

      const id = document.getElementById('jobIdQuick').value.trim();

      if (id) location.href = `/offers.html?id=${encodeURIComponent(id)}`;

    };



    // Ø§Ø®ØªÙŠØ§Ø± ÙØ¦Ø© Ù…Ù† Ø´Ø¨ÙƒØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙŠÙ…Ù„Ø£ Ø±Ø§Ø¯ÙŠÙˆ Ø§Ù„ÙÙˆØ±Ù…

    document.querySelectorAll('.category-grid .cat').forEach(btn=>{

      btn.addEventListener('click', ()=>{

        openDoor();

        const val = btn.dataset.cat;

        const input = [...document.querySelectorAll('input[name="category"]')].find(i=>i.value===val);

        if(input){ input.checked = true; }

        document.querySelector('.sheet').scrollTop = 0;

      });

    });



    // ===== Upload (pick & drag-drop & preview) =====

    const fileInput = document.getElementById('fileInput');

    const pickBtn   = document.getElementById('pickBtn');

    const fileList  = document.getElementById('fileList');

    const dropZone  = document.getElementById('dropZone');



    pickBtn.onclick = () => fileInput.click();



    const humanSize = (b)=> {

      if (b < 1024) return b + ' B';

      if (b < 1024*1024) return (b/1024).toFixed(1) + ' KB';

      return (b/1024/1024).toFixed(1) + ' MB';

    };



    const renderList = (files) => {

      fileList.innerHTML = '';

      if (!files.length) { fileList.innerHTML = '<span class="hint">No files selected yet.</span>'; return; }

      [...files].forEach(f=>{

        const item = document.createElement('div');

        item.className = 'file-item';

        const isImg = /^image\\//.test(f.type);

        item.innerHTML = `

          <div class="thumb">${isImg ? `<img src="${URL.createObjectURL(f)}" alt="">` : `<i class="fa-regular fa-file-lines"></i>`}</div>

          <div class="meta"><b>${f.name}</b><span>${f.type || 'file'} â€¢ ${humanSize(f.size)}</span></div>

        `;

        fileList.appendChild(item);

      });

    };

    fileInput.addEventListener('change', () => renderList(fileInput.files));



    // Drag & Drop

    ['dragenter','dragover','dragleave','drop'].forEach(e => {

      dropZone.addEventListener(e, ev => { ev.preventDefault(); ev.stopPropagation(); }, false);

    });

    ['dragenter','dragover'].forEach(e => {

      dropZone.addEventListener(e, () => dropZone.classList.add('hover'), false);

    });

    ['dragleave','drop'].forEach(e => {

      dropZone.addEventListener(e, () => dropZone.classList.remove('hover'), false);

    });

    dropZone.addEventListener('drop', (ev)=>{

      const dt = ev.dataTransfer;

      if (!dt || !dt.files) return;

      fileInput.files = dt.files;

      renderList(fileInput.files);

    });



    // Helpers Base64

    const bufToBase64 = (buf)=>{

      let bin = ''; new Uint8Array(buf).forEach(b=>bin += String.fromCharCode(b));

      return btoa(bin);

    };

    const filesToBase64 = async (list)=>{

      const arr = [];

      for (const f of [...list||[]]) {

        if (f.size > 10*1024*1024) throw new Error(`File too large: ${f.name}`);

        const buf = await f.arrayBuffer();

        arr.push(bufToBase64(buf));

      }

      return arr;

    };



    // ===== Submit Job =====

    document.getElementById('sendBtn').onclick = async ()=>{

      const m = document.getElementById('sendMsg');

      try{

        // Ø§Ø¬Ù„Ø¨ Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©

        const catEl = document.querySelector('input[name="category"]:checked');

        const category = catEl ? catEl.value : null;



        const title = document.getElementById('title').value.trim();

        const summary = document.getElementById('summary').value.trim();

        const city = document.getElementById('city').value.trim();

        const state = document.getElementById('state').value.trim();

        const budget_min = document.getElementById('budgetMin').value || null;

        const budget_max = document.getElementById('budgetMax').value || null;

        const contact_name = document.getElementById('contactName').value.trim();

        const phone = document.getElementById('phone').value.trim();

        const email = document.getElementById('email').value.trim();

        const address = document.getElementById('address').value.trim();

        const description_long = document.getElementById('longDesc').value.trim();



        if(!category||!title||!contact_name||!phone||!email||!address||!description_long){

          m.textContent = 'Please fill all required fields.'; return;

        }



        m.textContent = 'Uploadingâ€¦';

        const photosBase64 = await filesToBase64(fileInput.files);



        const res = await fetch('/api/jobs/create', {

          method: 'POST',

          headers: {'Content-Type':'application/json'},

          body: JSON.stringify({

            // ğŸ”½ Ø¶Ø¹ Ø§ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù‡Ù†Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¥Ù† Ø£Ø±Ø¯Øª

            // NOTE: default_notify_email = "contact@probuildzone.com"

            category, title, summary, city, state, budget_min, budget_max,

            address, contact_name, phone, email, description_long,

            photosBase64

          })

        });

        const j = await res.json();

        if(!res.ok || !j.ok) throw new Error(j.error || 'Failed');



        m.textContent = 'Posted âœ” Job ID: ' + j.job_id;

        m.className = 'hint ok';

        setTimeout(()=>{ m.textContent=''; closeDoor(); }, 1200);

      }catch(e){

        m.textContent = 'Error: ' + (e.message || 'failed');

        m.className = 'hint err';

      }

    };



    // ===== Pros form =====

    document.getElementById('proForm').addEventListener('submit', async (e)=>{

      e.preventDefault();

      const msg = document.getElementById('proMsg');

      msg.textContent = 'Submittingâ€¦';



      const formData = new FormData(e.currentTarget);

      const data = Object.fromEntries(formData.entries());



      try{

        const res = await fetch('/api/pros/create', {

          method:'POST',

          headers:{'Content-Type':'application/json'},

          body: JSON.stringify({

            ...data,

            // ğŸ”‘ Stripe Ù„Ø§Ø­Ù‚Ø§Ù‹:

            // publishable_key: "pk_live_xxx",  // Ø¶Ø¹ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ù„Ù†ÙŠ Ù‡Ù†Ø§

          })

        });

        const j = await res.json();

        if(!res.ok || !j.ok) throw new Error(j.error || 'Failed');

        msg.textContent = 'Profile received âœ” We will email you next steps.';

        msg.className = 'hint ok';

      }catch(err){

        msg.textContent = 'Error: ' + (err.message || 'failed');

        msg.className = 'hint err';

      }

    });



    // Ø²Ø± Ø¯ÙØ¹ Ø³Ù†ÙˆÙŠ Placeholder (Stripe Ù„Ø§Ø­Ù‚Ø§Ù‹)

    document.getElementById('payYearly').addEventListener('click', (e)=>{

      e.preventDefault();

      alert('Stripe Checkout: $300/year â€” placeholder.\\n\\n// Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø³Ù†Ø³ØªØ®Ø¯Ù… price_id Ù…Ù† Stripe Ù‡Ù†Ø§.');

      // Ù…Ø«Ø§Ù„ Ù„Ø§Ø­Ù‚Ø§Ù‹:

      // const stripe = Stripe('pk_live_xxx'); // Ø¶Ø¹ Ù…ÙØªØ§Ø­ Stripe Ø§Ù„Ø¹Ù„Ù†ÙŠ Ù‡Ù†Ø§

      // stripe.redirectToCheckout({ lineItems:[{price:'price_300_yearly', quantity:1}], mode:'subscription', successUrl:location.origin+'/success', cancelUrl:location.href });

    });

  </script>

</body>

</html>
