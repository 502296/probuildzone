<!doctype html>

<html lang="en">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Success ‚Äî ProBuildZone</title>

  <style>

    body{margin:0;background:#0f4368;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#fff;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}

    .card{background:#0f2a43;border-radius:16px;padding:26px 26px 20px;max-width:460px;width:100%;box-shadow:0 10px 35px rgba(0,0,0,.15)}

    h1{font-size:26px;margin-bottom:6px}

    p{margin:6px 0 10px;line-height:1.5}

    .btn{background:#f1a21d;color:#000;padding:10px 14px;border-radius:10px;display:inline-block;margin-top:16px;text-decoration:none;font-weight:600}

    .small{margin-top:10px;font-size:13px;opacity:.8}

    #saveMsg{margin-top:8px;font-size:13px}

  </style>

</head>

<body>

  <div class="card">

    <h1>üéâ You‚Äôre in!</h1>

    <p>Thanks for starting your 30-day free trial. We've received your details and payment setup via Stripe.</p>

    <p>If you need help, email <a href="mailto:contact@probuildzone.com" style="color:#fff;font-weight:600">contact@probuildzone.com</a>.</p>

    <p id="saveMsg" class="small">Saving your profile...</p>

    <a class="btn" href="/">Back to Home</a>

  </div>



  <script>

    (async () => {

      const BASE = location.origin;

      const stored = localStorage.getItem('pbz_form_data');

      if (!stored){

        document.getElementById('saveMsg').textContent = 'Could not find form data (localStorage empty).';

        return;

      }

      try {

        const res = await fetch(`${BASE}/.netlify/functions/save-profile`, {

          method: 'POST',

          headers: { 'Content-Type': 'application/json' },

          body: stored

        });

        if (res.ok){

          document.getElementById('saveMsg').textContent = 'Profile saved to database.';

          // ŸÑŸà ÿ™ÿ≠ÿ® ÿ™ŸÅÿ±Ÿëÿ∫ ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ:

          // localStorage.removeItem('pbz_form_data');

        } else {

          const t = await res.text();

          document.getElementById('saveMsg').textContent = 'Could not save to database: ' + t;

        }

      } catch (err){

        document.getElementById('saveMsg').textContent = 'Error: ' + err.message;

      }

    })();

  </script>

</body>

</html>
