<!doctype html>

<html lang="en" dir="ltr">

<head>

  <meta charset="utf-8"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>ProBuildZone â€” Success</title>

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>

    :root{

      --pbz-blue:#0F2A43;

      --gold:#D4AF37;

      --gold-700:#b9962f;

      --ok:#0a8f55;

    }

    *{box-sizing:border-box}

    body{

      margin:0;

      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;

      background:var(--pbz-blue);

      color:#fff;

      display:flex;

      justify-content:center;

      align-items:center;

      height:100vh;

      text-align:center;

      padding:20px;

    }

    .card{

      background:#fff;

      color:#111;

      border-radius:16px;

      padding:32px 24px;

      max-width:400px;

      box-shadow:0 10px 40px rgba(0,0,0,.15);

    }

    h1{margin:0 0 12px;font-size:26px;color:var(--pbz-blue);}

    p{margin:0 0 10px;font-size:15px;line-height:1.5;}

    .btn{

      display:inline-block;

      margin-top:16px;

      background:var(--gold);

      color:#111;

      font-weight:700;

      text-decoration:none;

      padding:12px 18px;

      border-radius:12px;

      border:1px solid var(--gold-700);

    }

    #save-status{

      margin-top:16px;

      color:var(--ok);

      font-weight:600;

    }

  </style>

</head>

<body>

  <div class="card">

    <h1>ğŸ‰ Youâ€™re in!</h1>

    <p>Thanks for starting your 30-day free trial.</p>

    <p>Weâ€™ve received your details and payment setup via Stripe.</p>

    <p>If you need help, email <strong>contact@probuildzone.com</strong>.</p>

    <div id="save-status">Saving your info...</div>

    <a href="/" class="btn">Back to Home</a>

  </div>



  <script type="module">

    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';



    // Ø§Ù‚Ø±Ø£ Ø§Ù„Ø¯Ø§ØªØ§ Ø§Ù„Ù„ÙŠ Ø®Ø²Ù‘Ù†Ø§Ù‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹

    const payload = JSON.parse(localStorage.getItem('pbz_form_data') || '{}');

    console.log('ProBuildZone signup data:', payload);



    const statusBox = document.getElementById('save-status');



    // Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ Supabase (Ù…ÙØªØ§Ø­ anon ÙÙ‚Ø· Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©/Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø©)

    const SUPABASE_URL = 'https://YOUR_PROJECT.supabase.co';       // ğŸ”¹ Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ù…Ø´Ø±ÙˆØ¹Ùƒ

    const SUPABASE_ANON = 'YOUR_PUBLIC_ANON_KEY';                  // ğŸ”¹ Ù…Ù† ØµÙØ­Ø© API Keys (anon key)



    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON);



    async function saveToSupabase() {

      if (!payload.name || !payload.email) {

        statusBox.textContent = 'No data to save (empty payload).';

        return;

      }



      const { data, error } = await supabase

        .from('pros')

        .insert([{

          full_name: payload.name,

          email: payload.email,

          phone: payload.phone,

          company_address: payload.address,

          license_no: payload.license,

          insurance_no: payload.insurance,

          notes: payload.notes,

          stripe_status: 'active'

        }]);



      if (error) {

        console.error('Supabase error:', error);

        statusBox.textContent = 'Saved via Stripe, but could not sync to Supabase.';

      } else {

        console.log('Supabase sync success:', data);

        statusBox.textContent = 'Your information has been saved successfully.';

      }

    }



    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø­ÙØ¸

    saveToSupabase();

  </script>

</body>

</html>
