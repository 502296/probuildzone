<script>

  // هذا مثال للداتا اللي تبغى تحفظها

  const data = {

    email: localStorage.getItem('pbz_email') || '',

    name: localStorage.getItem('pbz_name') || '',

    biz: localStorage.getItem('pbz_biz') || '',

    phone: localStorage.getItem('pbz_phone') || '',

    address: localStorage.getItem('pbz_address') || '',

    license: localStorage.getItem('pbz_license') || '',

    insurance: localStorage.getItem('pbz_insurance') || '',

    notes: localStorage.getItem('pbz_notes') || '',

  };



  // نعرض "جاري الحفظ..." مثل اللي عندك

  const msg = document.querySelector('#save-msg'); // حط id في الصفحة لو ما عندك

  if (msg) msg.textContent = 'Saving your subscription to our records...';



  fetch('/.netlify/functions/save-profile', {

    method: 'POST',

    headers: { 'Content-Type': 'application/json' },

    body: JSON.stringify(data),

  })

    .then(r => r.json())

    .then(res => {

      console.log('save-profile response:', res);

      if (msg) {

        if (res.ok) {

          msg.textContent = 'Saved to Google Sheet ✅';

        } else {

          msg.textContent = 'Could not save to Sheet. Please contact support.';

        }

      }

    })

    .catch(err => {

      console.error(err);

      if (msg) msg.textContent = 'Could not save to Sheet. Please contact support.';

    });

</script>
