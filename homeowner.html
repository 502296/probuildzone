<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>ProBuildZone ‚Äì Post a Job</title>

  <style>

    body {

      background: #0f2a43;

      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

      padding: 30px 15px 50px;

      display: flex;

      justify-content: center;

      color: white;

    }

    .container {

      width: min(600px, 100%);

      background: #132d49;

      padding: 25px 30px;

      border-radius: 12px;

      box-shadow: 0 0 12px rgba(0,0,0,0.25);

    }

    h1 {

      text-align: center;

      color: #D4AF37;

      margin-bottom: 10px;

    }

    p.sub {

      text-align: center;

      color: #ccc;

      margin-bottom: 25px;

      font-size: 0.95rem;

    }

    label {

      display: block;

      margin-top: 14px;

      font-weight: 600;

      color: #f1f1f1;

    }

    input, textarea {

      width: 100%;

      margin-top: 6px;

      padding: 10px 11px;

      border-radius: 6px;

      border: 1px solid #dcdde1;

      font-size: 0.93rem;

      background: #f8f8f8;

      color: #111;

    }

    textarea {

      min-height: 90px;

      resize: vertical;

    }

    button {

      width: 100%;

      margin-top: 22px;

      background: #D4AF37;

      color: #0f2a43;

      border: none;

      border-radius: 6px;

      padding: 12px 0;

      font-size: 1rem;

      font-weight: 600;

      cursor: pointer;

      transition: background 0.15s ease;

    }

    button:hover { background: #b9962f; }

    .msg { margin-top: 15px; padding: 10px 12px; border-radius: 6px; display: none; font-size: 0.9rem; }

    .msg.success { background: rgba(39,174,96,0.15); color: #2ecc71; }

    .msg.error { background: rgba(192,57,43,0.15); color: #e74c3c; }

  </style>

</head>



<body>

  <div class="container">

    <h1>Post a Job</h1>

    <p class="sub">Tell us what you need and we‚Äôll match you with local pros.</p>



    <form id="homeownerForm">

      <label>Category</label>

      <input id="category" name="category" placeholder="e.g. Roofing, Plumbing..." />



      <label>Project title *</label>

      <input id="title" name="title" placeholder="Replace leaking roof..." required />



      <label>Short summary</label>

      <input id="summary" name="summary" placeholder="One or two lines..." />



      <label>City</label>

      <input id="city" name="city" placeholder="Enter your city" />



      <label>State</label>

      <input id="state" name="state" placeholder="Enter your state" />



      <label>Estimated budget (optional)</label>

      <div style="display:flex; gap:10px;">

        <input id="budget_from" name="budget_from" placeholder="From ($)" />

        <input id="budget_to" name="budget_to" placeholder="To ($)" />

      </div>



      <label>Contact name *</label>

      <input id="full_name" name="full_name" placeholder="Your name" required />



      <label>Phone *</label>

      <input id="phone" name="phone" placeholder="Your phone number" required />



      <label>Email *</label>

      <input id="email" name="email" type="email" placeholder="Your email address" required />



      <label>Full address *</label>

      <input id="address" name="address" placeholder="Street, City, State" required />



      <label>Full description *</label>

      <textarea id="description" name="description" placeholder="Describe the job in detail..." required></textarea>



      <button type="submit">üöÄ Post Job</button>



      <div id="successMsg" class="msg success">‚úÖ Your job has been posted successfully.</div>

      <div id="errorMsg" class="msg error">‚ùå Something went wrong.</div>

    </form>

  </div>



  <script>

    const form = document.getElementById('homeownerForm');

    const successMsg = document.getElementById('successMsg');

    const errorMsg = document.getElementById('errorMsg');



    form.addEventListener('submit', async (e) => {

      e.preventDefault();

      successMsg.style.display = 'none';

      errorMsg.style.display = 'none';



      const data = {

        category: document.getElementById('category').value.trim(),

        title: document.getElementById('title').value.trim(),

        summary: document.getElementById('summary').value.trim(),

        city: document.getElementById('city').value.trim(),

        state: document.getElementById('state').value.trim(),

        budget_from: document.getElementById('budget_from').value.trim(),

        budget_to: document.getElementById('budget_to').value.trim(),

        full_name: document.getElementById('full_name').value.trim(),

        phone: document.getElementById('phone').value.trim(),

        email: document.getElementById('email').value.trim(),

        address: document.getElementById('address').value.trim(),

        description: document.getElementById('description').value.trim(),

        zip: null,

        homeowner_id: null,

      };



      try {

        const res = await fetch('/.netlify/functions/post-homeowner', {

          method: 'POST',

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify(data),

        });



        const result = await res.json();

        if (res.ok && result.ok) {

          successMsg.style.display = 'block';

          form.reset();

        } else {

          errorMsg.textContent = '‚ùå ' + (result.error || 'Server error');

          errorMsg.style.display = 'block';

        }

      } catch (err) {

        errorMsg.textContent = '‚ùå Network error: ' + err.message;

        errorMsg.style.display = 'block';

      }

    });

  </script>

</body>

</html>
