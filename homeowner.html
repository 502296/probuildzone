<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>ProBuildZone ‚Äî Homeowner</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>

    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:#f6f7fb;color:#0f2a43;padding:40px}

    h1{ text-align:center }

    form{ max-width:560px;margin:32px auto;background:#fff;padding:24px;border-radius:12px;box-shadow:0 6px 20px rgba(15,42,67,.08)}

    label{font-weight:600;margin-top:6px;display:block}

    input,textarea{width:100%;padding:12px 14px;margin:8px 0 16px;border:1px solid #d8dde6;border-radius:8px;font-size:16px}

    button{width:100%;background:#0f2a43;color:#fff;font-weight:700;padding:12px 16px;border:0;border-radius:10px;cursor:pointer;transition:.2s}

    button:hover{background:#143756}

    #post-error{color:#b00020;text-align:center;margin-top:10px;font-weight:600}

    .hint{color:#6b7a8c;font-size:.9rem;margin-top:-10px;margin-bottom:10px}

  </style>

</head>

<body>

  <h1>üè° Post Your Project</h1>



  <form id="job-form" novalidate>

    <label for="name">Full name *</label>

    <input id="name" type="text" placeholder="e.g., Ali Kathem" required />



    <label for="email">Email *</label>

    <input id="email" type="email" placeholder="name@email.com" required />



    <label for="phone">Phone (optional)</label>

    <input id="phone" type="text" placeholder="(555) 555-5555" />



    <label for="address">Full address *</label>

    <input id="address" type="text" placeholder="123 Main St, Louisville, KY" required />



    <label for="description">Project description *</label>

    <textarea id="description" rows="5" placeholder="Describe your project‚Ä¶" required></textarea>



    <button type="submit">üöÄ Post Job</button>

    <p class="hint" id="status-hint"></p>

    <p id="post-error"></p>

  </form>



  <script>

    const FN_URL = 'https://probuildzone.netlify.app/.netlify/functions/post-job'; // Netlify domain



    document.getElementById('job-form').addEventListener('submit', async (e) => {

      e.preventDefault();

      const status = document.getElementById('status-hint');

      const errorBox = document.getElementById('post-error');

      status.textContent = 'Saving to database‚Ä¶';

      errorBox.textContent = '';



      const payload = {

        name: document.getElementById('name').value.trim(),

        email: document.getElementById('email').value.trim(),

        phone: document.getElementById('phone')?.value?.trim() || null,

        address: document.getElementById('address').value.trim(),

        description: document.getElementById('description').value.trim(),

      };



      try {

        const res = await fetch(FN_URL, {

          method: 'POST',

          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },

          body: JSON.stringify(payload),

          mode: 'cors'

        });



        const text = await res.text();

        let data;

        try { data = JSON.parse(text); }

        catch { throw new Error(`Non-JSON response (${res.status}): ${text.slice(0,120)}‚Ä¶`); }



        if (!res.ok) throw new Error(data.error || 'Failed to post job');



        alert('‚úÖ Job posted successfully!');

        e.target.reset();

        status.textContent = 'Saved ‚úî';

      } catch (err) {

        console.error(err);

        status.textContent = '';

        errorBox.textContent = `Error: ${err.message}`;

      }

    });

  </script>

</body>

</html>
